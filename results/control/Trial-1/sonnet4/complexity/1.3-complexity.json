[{"filePath":"/Users/mercury/Projects/RubricDSL/demo/src/app.tsx","messages":[{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":4,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":8,"endColumn":2}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { TaskView } from './views/task-view';\n\nexport const App: React.FC = () => {\n  return (\n    <TaskView />\n  );\n};","usedDeprecatedRules":[]},{"filePath":"/Users/mercury/Projects/RubricDSL/demo/src/models/task.ts","messages":[{"ruleId":"complexity","severity":1,"message":"Constructor has a complexity of 4. Maximum allowed is 0.","line":20,"column":16,"nodeType":"FunctionExpression","messageId":"complex","endLine":34,"endColumn":6},{"ruleId":"complexity","severity":1,"message":"Getter 'id' has a complexity of 1. Maximum allowed is 0.","line":36,"column":11,"nodeType":"FunctionExpression","messageId":"complex","endLine":36,"endColumn":42},{"ruleId":"complexity","severity":1,"message":"Getter 'title' has a complexity of 1. Maximum allowed is 0.","line":37,"column":14,"nodeType":"FunctionExpression","messageId":"complex","endLine":37,"endColumn":48},{"ruleId":"complexity","severity":1,"message":"Getter 'description' has a complexity of 1. Maximum allowed is 0.","line":38,"column":20,"nodeType":"FunctionExpression","messageId":"complex","endLine":38,"endColumn":60},{"ruleId":"complexity","severity":1,"message":"Getter 'completed' has a complexity of 1. Maximum allowed is 0.","line":39,"column":18,"nodeType":"FunctionExpression","messageId":"complex","endLine":39,"endColumn":57},{"ruleId":"complexity","severity":1,"message":"Getter 'syncStatus' has a complexity of 1. Maximum allowed is 0.","line":40,"column":19,"nodeType":"FunctionExpression","messageId":"complex","endLine":40,"endColumn":62},{"ruleId":"complexity","severity":1,"message":"Getter 'lastSyncError' has a complexity of 1. Maximum allowed is 0.","line":41,"column":22,"nodeType":"FunctionExpression","messageId":"complex","endLine":41,"endColumn":76},{"ruleId":"complexity","severity":1,"message":"Method 'toggle' has a complexity of 1. Maximum allowed is 0.","line":43,"column":11,"nodeType":"FunctionExpression","messageId":"complex","endLine":51,"endColumn":6},{"ruleId":"complexity","severity":1,"message":"Method 'updateTitle' has a complexity of 1. Maximum allowed is 0.","line":53,"column":16,"nodeType":"FunctionExpression","messageId":"complex","endLine":61,"endColumn":6},{"ruleId":"complexity","severity":1,"message":"Method 'updateDescription' has a complexity of 1. Maximum allowed is 0.","line":63,"column":22,"nodeType":"FunctionExpression","messageId":"complex","endLine":71,"endColumn":6},{"ruleId":"complexity","severity":1,"message":"Method 'withSyncStatus' has a complexity of 1. Maximum allowed is 0.","line":73,"column":19,"nodeType":"FunctionExpression","messageId":"complex","endLine":82,"endColumn":6}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export type SyncStatus = 'synced' | 'syncing' | 'error' | 'pending';\n\nexport interface ITask {\n    id: string;\n    title: string;\n    description: string;\n    completed: boolean;\n    syncStatus?: SyncStatus;\n    lastSyncError?: string;\n  }\n  \n  export class TaskModel implements ITask {\n    private _id: string;          \n    private _title: string;\n    private _description: string;       \n    private _completed: boolean;\n    private _syncStatus: SyncStatus;\n    private _lastSyncError?: string;\n    \n    constructor(\n      id: string, \n      title: string, \n      description: string = '', \n      completed: boolean = false,\n      syncStatus: SyncStatus = 'pending',\n      lastSyncError?: string\n    ) {\n      this._id = id;\n      this._title = title;\n      this._description = description;\n      this._completed = completed;\n      this._syncStatus = syncStatus;\n      this._lastSyncError = lastSyncError;\n    }\n    \n    get id(): string { return this._id; }\n    get title(): string { return this._title; }\n    get description(): string { return this._description; }\n    get completed(): boolean { return this._completed; }\n    get syncStatus(): SyncStatus { return this._syncStatus; }\n    get lastSyncError(): string | undefined { return this._lastSyncError; }\n    \n    toggle(): TaskModel {\n      return new TaskModel(\n        this._id, \n        this._title, \n        this._description, \n        !this._completed, \n        'pending'\n      );\n    }\n\n    updateTitle(title: string): TaskModel {\n      return new TaskModel(\n        this._id,\n        title,\n        this._description,\n        this._completed,\n        'pending'\n      );\n    }\n\n    updateDescription(description: string): TaskModel {\n      return new TaskModel(\n        this._id,\n        this._title,\n        description,\n        this._completed,\n        'pending'\n      );\n    }\n\n    withSyncStatus(syncStatus: SyncStatus, error?: string): TaskModel {\n      return new TaskModel(\n        this._id,\n        this._title,\n        this._description,\n        this._completed,\n        syncStatus,\n        error\n      );\n    }\n  }","usedDeprecatedRules":[]},{"filePath":"/Users/mercury/Projects/RubricDSL/demo/src/stores/task-store.ts","messages":[{"ruleId":"complexity","severity":1,"message":"Class field initializer has a complexity of 1. Maximum allowed is 0.","line":7,"column":44,"nodeType":"NewExpression","messageId":"complex","endLine":7,"endColumn":53},{"ruleId":"complexity","severity":1,"message":"Class field initializer has a complexity of 1. Maximum allowed is 0.","line":8,"column":41,"nodeType":"NewExpression","messageId":"complex","endLine":8,"endColumn":50},{"ruleId":"complexity","severity":1,"message":"Class field initializer has a complexity of 1. Maximum allowed is 0.","line":9,"column":29,"nodeType":"Literal","messageId":"complex","endLine":9,"endColumn":30},{"ruleId":"complexity","severity":1,"message":"Class field initializer has a complexity of 1. Maximum allowed is 0.","line":10,"column":60,"nodeType":"NewExpression","messageId":"complex","endLine":10,"endColumn":69},{"ruleId":"complexity","severity":1,"message":"Method '_logTaskOperation' has a complexity of 1. Maximum allowed is 0.","line":12,"column":28,"nodeType":"FunctionExpression","messageId":"complex","endLine":15,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Async method '_syncTaskToAPI' has a complexity of 4. Maximum allowed is 0.","line":18,"column":31,"nodeType":"FunctionExpression","messageId":"complex","endLine":50,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Method '_scheduleAutoSave' has a complexity of 2. Maximum allowed is 0.","line":52,"column":28,"nodeType":"FunctionExpression","messageId":"complex","endLine":69,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 3. Maximum allowed is 0.","line":60,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":66,"endColumn":6},{"ruleId":"complexity","severity":1,"message":"Async method '_autoSaveTask' has a complexity of 2. Maximum allowed is 0.","line":71,"column":30,"nodeType":"FunctionExpression","messageId":"complex","endLine":82,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Method 'addTask' has a complexity of 2. Maximum allowed is 0.","line":84,"column":10,"nodeType":"FunctionExpression","messageId":"complex","endLine":100,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Method 'updateTaskTitle' has a complexity of 3. Maximum allowed is 0.","line":102,"column":18,"nodeType":"FunctionExpression","messageId":"complex","endLine":113,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Method 'updateTaskDescription' has a complexity of 3. Maximum allowed is 0.","line":115,"column":24,"nodeType":"FunctionExpression","messageId":"complex","endLine":126,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Method 'toggleTask' has a complexity of 2. Maximum allowed is 0.","line":128,"column":13,"nodeType":"FunctionExpression","messageId":"complex","endLine":139,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Method 'deleteTask' has a complexity of 3. Maximum allowed is 0.","line":141,"column":13,"nodeType":"FunctionExpression","messageId":"complex","endLine":154,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Async method 'retrySyncTask' has a complexity of 3. Maximum allowed is 0.","line":157,"column":22,"nodeType":"FunctionExpression","messageId":"complex","endLine":162,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Method 'getTasks' has a complexity of 1. Maximum allowed is 0.","line":164,"column":11,"nodeType":"FunctionExpression","messageId":"complex","endLine":173,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":165,"column":49,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":172,"endColumn":7},{"ruleId":"complexity","severity":1,"message":"Method 'subscribe' has a complexity of 1. Maximum allowed is 0.","line":175,"column":12,"nodeType":"FunctionExpression","messageId":"complex","endLine":178,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":177,"column":12,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":177,"endColumn":50},{"ruleId":"complexity","severity":1,"message":"Method '_generateId' has a complexity of 1. Maximum allowed is 0.","line":180,"column":22,"nodeType":"FunctionExpression","messageId":"complex","endLine":182,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Method '_notifyListeners' has a complexity of 1. Maximum allowed is 0.","line":184,"column":27,"nodeType":"FunctionExpression","messageId":"complex","endLine":186,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":185,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":185,"endColumn":51},{"ruleId":"complexity","severity":1,"message":"Method 'cleanup' has a complexity of 1. Maximum allowed is 0.","line":189,"column":10,"nodeType":"FunctionExpression","messageId":"complex","endLine":192,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":190,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":190,"endColumn":68}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":24,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { TaskModel, ITask, SyncStatus } from '../models/task';\n\nconst API_BASE_URL = 'https://api.example.com/tasks';\nconst AUTO_SAVE_DEBOUNCE_MS = 1000; // 1 second debounce\n\nexport class TaskStore {\n  private _tasks: Map<string, TaskModel> = new Map();     \n  private _listeners: Set<() => void> = new Set();       \n  private _nextId: number = 1;\n  private _autoSaveTimeouts: Map<string, NodeJS.Timeout> = new Map();\n\n  private _logTaskOperation(action: string, taskId: string): void {\n    const timestamp = new Date().toISOString();\n    console.log(`[${timestamp}] Action: ${action} Task: ${taskId}`);\n  }\n\n  // API sync methods\n  private async _syncTaskToAPI(task: TaskModel): Promise<void> {\n    try {\n      const response = await fetch(API_BASE_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          id: task.id,\n          title: task.title,\n          description: task.description,\n          completed: task.completed,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n      }\n\n      // Update sync status to synced\n      const syncedTask = task.withSyncStatus('synced');\n      this._tasks.set(task.id, syncedTask);\n      this._logTaskOperation('synced', task.id);\n      this._notifyListeners();\n    } catch (error) {\n      console.error('Sync failed:', error);\n      // Update sync status to error\n      const errorTask = task.withSyncStatus('error', error instanceof Error ? error.message : 'Sync failed');\n      this._tasks.set(task.id, errorTask);\n      this._logTaskOperation('sync_error', task.id);\n      this._notifyListeners();\n    }\n  }\n\n  private _scheduleAutoSave(taskId: string): void {\n    // Clear existing timeout for this task\n    const existingTimeout = this._autoSaveTimeouts.get(taskId);\n    if (existingTimeout) {\n      clearTimeout(existingTimeout);\n    }\n\n    // Schedule new auto-save\n    const timeout = setTimeout(() => {\n      const task = this._tasks.get(taskId);\n      if (task && task.syncStatus === 'pending') {\n        this._autoSaveTask(taskId);\n      }\n      this._autoSaveTimeouts.delete(taskId);\n    }, AUTO_SAVE_DEBOUNCE_MS);\n\n    this._autoSaveTimeouts.set(taskId, timeout);\n  }\n\n  private async _autoSaveTask(taskId: string): Promise<void> {\n    const task = this._tasks.get(taskId);\n    if (!task) return;\n\n    // Set syncing status\n    const syncingTask = task.withSyncStatus('syncing');\n    this._tasks.set(taskId, syncingTask);\n    this._logTaskOperation('auto_sync_start', taskId);\n    this._notifyListeners();\n\n    await this._syncTaskToAPI(syncingTask);\n  }\n\n  addTask(title: string, description: string = ''): ITask {\n    const task = new TaskModel(\n      this._generateId(),  \n      title,\n      description,\n      false,\n      'pending' // Start as pending sync\n    );\n    this._tasks.set(task.id, task);\n    this._logTaskOperation('create', task.id);\n    this._notifyListeners();\n    \n    // Schedule auto-save for new task\n    this._scheduleAutoSave(task.id);\n    \n    return task; \n  }\n\n  updateTaskTitle(id: string, title: string): void {\n    const task = this._tasks.get(id);\n    if (task && task.title !== title) {\n      const updatedTask = task.updateTitle(title);\n      this._tasks.set(id, updatedTask);\n      this._logTaskOperation('update_title', id);\n      this._notifyListeners();\n      \n      // Schedule auto-save\n      this._scheduleAutoSave(id);\n    }\n  }\n\n  updateTaskDescription(id: string, description: string): void {\n    const task = this._tasks.get(id);\n    if (task && task.description !== description) {\n      const updatedTask = task.updateDescription(description);\n      this._tasks.set(id, updatedTask);\n      this._logTaskOperation('update_description', id);\n      this._notifyListeners();\n      \n      // Schedule auto-save\n      this._scheduleAutoSave(id);\n    }\n  }\n\n  toggleTask(id: string): void {\n    const task = this._tasks.get(id);\n    if (task) {\n      const toggledTask = task.toggle();\n      this._tasks.set(id, toggledTask);\n      this._logTaskOperation('toggle', id);\n      this._notifyListeners();\n      \n      // Schedule auto-save\n      this._scheduleAutoSave(id);\n    }\n  }\n\n  deleteTask(id: string): void {\n    if (this._tasks.has(id)) {\n      // Clear any pending auto-save\n      const existingTimeout = this._autoSaveTimeouts.get(id);\n      if (existingTimeout) {\n        clearTimeout(existingTimeout);\n        this._autoSaveTimeouts.delete(id);\n      }\n      \n      this._tasks.delete(id);\n      this._logTaskOperation('delete', id);\n      this._notifyListeners();\n    }\n  }\n\n  // Manual sync for retry functionality\n  async retrySyncTask(id: string): Promise<void> {\n    const task = this._tasks.get(id);\n    if (task && task.syncStatus === 'error') {\n      await this._autoSaveTask(id);\n    }\n  }\n\n  getTasks(): ITask[] {\n    return Array.from(this._tasks.values()).map(task => ({\n      id: task.id,\n      title: task.title,\n      description: task.description,\n      completed: task.completed,\n      syncStatus: task.syncStatus,\n      lastSyncError: task.lastSyncError\n    }));\n  }\n\n  subscribe(listener: () => void): () => void {\n    this._listeners.add(listener);\n    return () => this._listeners.delete(listener);\n  }\n\n  private _generateId(): string {\n    return `task_${this._nextId++}`;\n  }\n\n  private _notifyListeners(): void {\n    this._listeners.forEach(listener => listener());\n  }\n\n  // Cleanup method for component unmount\n  cleanup(): void {\n    this._autoSaveTimeouts.forEach(timeout => clearTimeout(timeout));\n    this._autoSaveTimeouts.clear();\n  }\n}\n\nexport const taskStore = new TaskStore();","usedDeprecatedRules":[]},{"filePath":"/Users/mercury/Projects/RubricDSL/demo/src/views/task-view.tsx","messages":[{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":12,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":299,"endColumn":2},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 2. Maximum allowed is 0.","line":18,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":20,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":22,"column":13,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":32,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":23,"column":45,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":25,"endColumn":6},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":28,"column":12,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":31,"endColumn":6},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 2. Maximum allowed is 0.","line":34,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":41,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":43,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":45,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":47,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":49,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 2. Maximum allowed is 0.","line":51,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":55,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":57,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":59,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":61,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":63,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":65,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":73,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":66,"column":16,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":72,"endColumn":7},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":75,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":83,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":76,"column":16,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":82,"endColumn":7},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 5. Maximum allowed is 0.","line":85,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":93,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 5. Maximum allowed is 0.","line":95,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":103,"endColumn":4},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":114,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":114,"endColumn":61},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":122,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":122,"endColumn":67},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 14. Maximum allowed is 0.","line":131,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":295,"endColumn":10},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":144,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":144,"endColumn":56},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":158,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":161,"endColumn":22},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 3. Maximum allowed is 0.","line":162,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":169,"endColumn":22},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":180,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":180,"endColumn":66},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 2. Maximum allowed is 0.","line":195,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":195,"endColumn":89},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":201,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":201,"endColumn":55},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":229,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":232,"endColumn":18},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 4. Maximum allowed is 0.","line":233,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":240,"endColumn":18},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":257,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":257,"endColumn":70},{"ruleId":"complexity","severity":1,"message":"Arrow function has a complexity of 1. Maximum allowed is 0.","line":276,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"complex","endLine":276,"endColumn":68}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":30,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\nimport { taskStore } from '../stores/task-store';\nimport { SyncStatus } from '../models/task';\n\ninterface EditingState {\n  [taskId: string]: {\n    title?: boolean;\n    description?: boolean;\n  };\n}\n\nexport const TaskView: React.FC = () => {\n  const [tasks, setTasks] = useState(taskStore.getTasks());\n  const [newTaskTitle, setNewTaskTitle] = useState('');\n  const [newTaskDescription, setNewTaskDescription] = useState('');\n  const [editing, setEditing] = useState<EditingState>({});\n  \n  const _isValidTitle = (title: string): boolean => {\n    return title.trim().length > 0 && title.trim().length < 100;\n  };\n\n  useEffect(() => {\n    const unsubscribe = taskStore.subscribe(() => {\n      setTasks(taskStore.getTasks());\n    });\n\n    // Cleanup on unmount\n    return () => {\n      unsubscribe();\n      taskStore.cleanup();\n    };\n  }, []);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (_isValidTitle(newTaskTitle)) {\n      taskStore.addTask(newTaskTitle.trim(), newTaskDescription.trim());\n      setNewTaskTitle('');\n      setNewTaskDescription('');\n    }\n  };\n\n  const handleToggle = (id: string) => {\n    taskStore.toggleTask(id);\n  };\n\n  const handleDelete = (id: string) => {\n    taskStore.deleteTask(id);\n  };\n\n  const handleTitleEdit = (id: string, newTitle: string) => {\n    if (_isValidTitle(newTitle)) {\n      taskStore.updateTaskTitle(id, newTitle);\n    }\n  };\n\n  const handleDescriptionEdit = (id: string, newDescription: string) => {\n    taskStore.updateTaskDescription(id, newDescription);\n  };\n\n  const handleRetrySync = (id: string) => {\n    taskStore.retrySyncTask(id);\n  };\n\n  const startEditing = (taskId: string, field: 'title' | 'description') => {\n    setEditing(prev => ({\n      ...prev,\n      [taskId]: {\n        ...prev[taskId],\n        [field]: true\n      }\n    }));\n  };\n\n  const stopEditing = (taskId: string, field: 'title' | 'description') => {\n    setEditing(prev => ({\n      ...prev,\n      [taskId]: {\n        ...prev[taskId],\n        [field]: false\n      }\n    }));\n  };\n\n  const getSyncStatusIcon = (syncStatus?: SyncStatus): string => {\n    switch (syncStatus) {\n      case 'synced': return '✅';\n      case 'syncing': return '🔄';\n      case 'error': return '❌';\n      case 'pending': return '⏳';\n      default: return '⏳';\n    }\n  };\n\n  const getSyncStatusColor = (syncStatus?: SyncStatus): string => {\n    switch (syncStatus) {\n      case 'synced': return '#28a745';\n      case 'syncing': return '#007bff';\n      case 'error': return '#dc3545';\n      case 'pending': return '#ffc107';\n      default: return '#ffc107';\n    }\n  };\n\n  return (\n    <div className=\"task-view\">\n      <h1>Tasks</h1>\n      \n      <form onSubmit={handleSubmit}>\n        <div>\n          <input\n            type=\"text\"\n            value={newTaskTitle}\n            onChange={(e) => setNewTaskTitle(e.target.value)}\n            placeholder=\"Add a new task...\"\n            required\n          />\n        </div>\n        <div>\n          <textarea\n            value={newTaskDescription}\n            onChange={(e) => setNewTaskDescription(e.target.value)}\n            placeholder=\"Task description (optional)...\"\n            rows={3}\n          />\n        </div>\n        <button type=\"submit\">Add</button>\n      </form>\n\n      <ul>\n        {tasks.map(task => (\n          <li key={task.id} style={{ \n            marginBottom: '15px', \n            padding: '10px', \n            border: '1px solid #ddd', \n            borderRadius: '5px',\n            borderLeft: `4px solid ${getSyncStatusColor(task.syncStatus)}`\n          }}>\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\n              <label style={{ flex: 1 }}>\n                <input\n                  type=\"checkbox\"\n                  checked={task.completed}\n                  onChange={() => handleToggle(task.id)}\n                />\n                \n                {editing[task.id]?.title ? (\n                  <input\n                    type=\"text\"\n                    defaultValue={task.title}\n                    style={{\n                      marginLeft: '8px',\n                      fontWeight: 'bold',\n                      border: '1px solid #ddd',\n                      borderRadius: '3px',\n                      padding: '2px 4px'\n                    }}\n                    onBlur={(e) => {\n                      handleTitleEdit(task.id, e.target.value);\n                      stopEditing(task.id, 'title');\n                    }}\n                    onKeyDown={(e) => {\n                      if (e.key === 'Enter') {\n                        handleTitleEdit(task.id, e.currentTarget.value);\n                        stopEditing(task.id, 'title');\n                      } else if (e.key === 'Escape') {\n                        stopEditing(task.id, 'title');\n                      }\n                    }}\n                    autoFocus\n                  />\n                ) : (\n                  <span \n                    style={{\n                      textDecoration: task.completed ? 'line-through' : 'none',\n                      fontWeight: 'bold',\n                      marginLeft: '8px',\n                      cursor: 'pointer'\n                    }}\n                    onClick={() => startEditing(task.id, 'title')}\n                    title=\"Click to edit\"\n                  >\n                    {task.title}\n                  </span>\n                )}\n              </label>\n              \n              <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                <span \n                  style={{ \n                    fontSize: '16px',\n                    cursor: task.syncStatus === 'error' ? 'pointer' : 'default'\n                  }}\n                  title={task.syncStatus === 'error' ? `Error: ${task.lastSyncError}. Click to retry.` : `Status: ${task.syncStatus}`}\n                  onClick={() => task.syncStatus === 'error' && handleRetrySync(task.id)}\n                >\n                  {getSyncStatusIcon(task.syncStatus)}\n                </span>\n                \n                <button \n                  onClick={() => handleDelete(task.id)}\n                  style={{\n                    backgroundColor: '#ff4444',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '3px',\n                    padding: '4px 8px',\n                    fontSize: '12px',\n                    cursor: 'pointer'\n                  }}\n                >\n                  Delete\n                </button>\n              </div>\n            </div>\n            \n            {editing[task.id]?.description ? (\n              <textarea\n                defaultValue={task.description}\n                style={{\n                  marginTop: '5px',\n                  marginLeft: '24px',\n                  width: 'calc(100% - 24px)',\n                  minHeight: '60px',\n                  border: '1px solid #ddd',\n                  borderRadius: '3px',\n                  padding: '4px'\n                }}\n                onBlur={(e) => {\n                  handleDescriptionEdit(task.id, e.target.value);\n                  stopEditing(task.id, 'description');\n                }}\n                onKeyDown={(e) => {\n                  if (e.key === 'Escape') {\n                    stopEditing(task.id, 'description');\n                  } else if (e.key === 'Enter' && e.ctrlKey) {\n                    handleDescriptionEdit(task.id, e.currentTarget.value);\n                    stopEditing(task.id, 'description');\n                  }\n                }}\n                autoFocus\n              />\n            ) : (\n              task.description && (\n                <div \n                  style={{\n                    marginTop: '5px',\n                    marginLeft: '24px',\n                    color: '#666',\n                    fontSize: '14px',\n                    textDecoration: task.completed ? 'line-through' : 'none',\n                    cursor: 'pointer',\n                    padding: '2px 4px',\n                    borderRadius: '3px',\n                    backgroundColor: '#f8f9fa'\n                  }}\n                  onClick={() => startEditing(task.id, 'description')}\n                  title=\"Click to edit\"\n                >\n                  {task.description}\n                </div>\n              )\n            )}\n            \n            {!task.description && !editing[task.id]?.description && (\n              <div \n                style={{\n                  marginTop: '5px',\n                  marginLeft: '24px',\n                  color: '#999',\n                  fontSize: '14px',\n                  fontStyle: 'italic',\n                  cursor: 'pointer',\n                  padding: '2px 4px'\n                }}\n                onClick={() => startEditing(task.id, 'description')}\n                title=\"Click to add description\"\n              >\n                + Add description\n              </div>\n            )}\n\n            {task.syncStatus === 'error' && (\n              <div style={{\n                marginTop: '5px',\n                marginLeft: '24px',\n                color: '#dc3545',\n                fontSize: '12px',\n                fontStyle: 'italic'\n              }}>\n                Sync failed: {task.lastSyncError}\n              </div>\n            )}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};","usedDeprecatedRules":[]}]
